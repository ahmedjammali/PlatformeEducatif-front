<nav class="navbar" [class.scrolled]="isScrolled" *ngIf="!isLoggedIn" >
  <div class="navbar-container">
    <!-- Logo Section -->
    <div class="navbar-logo" routerLink="/" (click)="closeMobileMenu()">
      <div class="logo-icon">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" stroke="var(--color-primary-dark)" stroke-width="2" fill="var(--color-accent)"/>
          <path d="M20 10 L25 20 L20 30 L15 20 Z" fill="var(--color-primary-dark)"/>
          <circle cx="20" cy="20" r="5" fill="var(--color-secondary)"/>
        </svg>
      </div>
      <span class="logo-text">{{schoolName}}</span>
    </div>

    <!-- Desktop Navigation -->
    <div class="navbar-menu desktop-menu">
      <a class="nav-link" 
         [class.active]="isActiveSection('home')"
         (click)="scrollToSection('home')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('home') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">🏠</i>
        <span>Accueil</span>
      </a>
      <a class="nav-link" 
         [class.active]="isActiveSection('about')"
         (click)="scrollToSection('about')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('about') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">📚</i>
        <span>À Propos</span>
      </a>
      <a class="nav-link" 
         [class.active]="isActiveSection('contact')"
         (click)="scrollToSection('contact')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('contact') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">📧</i>
        <span>Contact</span>
      </a>
      
      <div class="nav-actions">
        <button *ngIf="!isLoggedIn" 
                class="login-btn" 
                (click)="navigateToLogin()"
                type="button"
                aria-label="Se connecter">
          <i class="btn-icon" aria-hidden="true">👤</i>
          <span>Se connecter</span>
        </button>
        
        <div *ngIf="isLoggedIn" class="user-menu">
          <button class="user-btn" 
                  (click)="navigateToDashboard()"
                  type="button"
                  [attr.aria-label]="'Aller au tableau de bord de ' + userName">
            <span class="user-avatar" 
                  [attr.aria-label]="'Avatar de ' + userName">
              {{ userName?.charAt(0)?.toUpperCase() }}
            </span>
            <span class="user-name">{{ userName }}</span>
          </button>
          <button class="logout-btn" 
                  (click)="logout()"
                  type="button"
                  aria-label="Se déconnecter">
            <i class="btn-icon" aria-hidden="true">🚪</i>
            <span>Déconnexion</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" 
            (click)="toggleMobileMenu()" 
            [attr.aria-expanded]="isMobileMenuOpen" 
            [attr.aria-label]="isMobileMenuOpen ? 'Fermer le menu' : 'Ouvrir le menu'"
            type="button">
      <span class="hamburger" [class.open]="isMobileMenuOpen" aria-hidden="true">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>
  </div>

  <!-- Mobile Navigation Overlay -->
  <div class="mobile-menu-overlay" 
       [class.open]="isMobileMenuOpen" 
       (click)="closeMobileMenu()"
       [attr.aria-hidden]="!isMobileMenuOpen"></div>
  
  <!-- Mobile Navigation -->
  <div class="mobile-menu" 
       [class.open]="isMobileMenuOpen"
       [attr.aria-hidden]="!isMobileMenuOpen"
       role="navigation"
       aria-label="Menu de navigation mobile">
    
    <div class="mobile-menu-header">
      <div class="mobile-logo">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="20" cy="20" r="18" stroke="#626F47" stroke-width="2" fill="#A4B465"/>
          <path d="M20 10 L25 20 L20 30 L15 20 Z" fill="#626F47"/>
          <circle cx="20" cy="20" r="5" fill="#F5ECD5"/>
        </svg>
        <span>{{schoolName}}</span>
      </div>
      <button class="mobile-close-btn" 
              (click)="closeMobileMenu()" 
              aria-label="Fermer le menu"
              type="button">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    
    <nav class="mobile-menu-nav" aria-label="Navigation principale">
      <a class="mobile-nav-link" 
         [class.active]="isActiveSection('home')"
         (click)="scrollToSection('home')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('home') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">🏠</i>
        <span>Accueil</span>
        <svg class="nav-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
          <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <a class="mobile-nav-link" 
         [class.active]="isActiveSection('about')"
         (click)="scrollToSection('about')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('about') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">📚</i>
        <span>À Propos</span>
        <svg class="nav-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
          <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <a class="mobile-nav-link" 
         [class.active]="isActiveSection('contact')"
         (click)="scrollToSection('contact')"
         role="button"
         tabindex="0"
         [attr.aria-current]="isActiveSection('contact') ? 'page' : null">
        <i class="nav-icon" aria-hidden="true">📧</i>
        <span>Contact</span>
        <svg class="nav-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true">
          <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </nav>
    
    <div class="mobile-nav-actions">
      <button *ngIf="!isLoggedIn" 
              class="mobile-login-btn" 
              (click)="navigateToLogin()"
              type="button"
              aria-label="Se connecter">
        <i class="btn-icon" aria-hidden="true">👤</i>
        <span>Se connecter</span>
      </button>
      
      <div *ngIf="isLoggedIn" class="mobile-user-section">
        <div class="mobile-user-info">
          <span class="user-avatar-large" 
                [attr.aria-label]="'Avatar de ' + userName">
            {{ userName?.charAt(0)?.toUpperCase() }}
          </span>
          <span class="user-name-mobile">{{ userName }}</span>
        </div>
        <button class="mobile-dashboard-btn" 
                (click)="navigateToDashboard(); closeMobileMenu()"
                type="button"
                aria-label="Aller au tableau de bord">
          <i aria-hidden="true">📊</i>
          <span>Tableau de bord</span>
        </button>
        <button class="mobile-logout-btn" 
                (click)="logout()"
                type="button"
                aria-label="Se déconnecter">
          <i aria-hidden="true">🚪</i>
          <span>Déconnexion</span>
        </button>
      </div>
    </div>
  </div>
</nav>